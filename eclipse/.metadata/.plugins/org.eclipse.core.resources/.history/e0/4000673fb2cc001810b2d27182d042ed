package net.theexceptionist.coherentvillages.main.entity;

import java.util.Random;

import net.minecraft.entity.EntityLiving;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.entity.IRangedAttackMob;
import net.minecraft.entity.SharedMonsterAttributes;
import net.minecraft.entity.passive.EntityVillager;
import net.minecraft.util.ResourceLocation;
import net.minecraft.world.World;
import net.theexceptionist.coherentvillages.entity.followers.IEntityFollower;
import net.theexceptionist.coherentvillages.entity.soldier.AbstractVillagerSoldier;
import net.theexceptionist.coherentvillages.main.NameGenerator;
import net.theexceptionist.coherentvillages.main.entity.attributes.AttributeVocation;
import net.theexceptionist.coherentvillages.main.entity.attributes.EntityFaction;

public class EntityHumanVillager extends EntityVillager implements IEntityFollower, IRangedAttackMob{
	protected String className = "Soldier", firstName, lastName;
	protected int gender = -1;
	protected EntityRace race;
	protected EntityFaction faction;
	protected AttributeVocation vocation;
	private ResourceLocation skin;
	
	final static int GENDER_MALE = 0;
	final static int GENDER_FEMALE = 1;
	
	
	public EntityHumanVillager(World worldIn) {
		this(worldIn, 0);
	}
	
	public EntityHumanVillager(World worldIn, final int type)
	{
		super(worldIn);
		
		this.vocation = type;
		this.subType = getRandomSubType(type);
		this.gender = world.rand.nextInt(2);
		this.initEntityClass();
	}
	
	protected void applyEntityAttributes()
    {
        super.applyEntityAttributes();

        getAttributeMap().registerAttribute(SharedMonsterAttributes.ATTACK_DAMAGE);
    }

	private int getRandomSubType(final int type) {
		switch(type)
		{
			case CLASS_VAGABOND:
			{
				return 0;
			}
			case CLASS_SOLDIER:
			{
				return world.rand.nextInt(NUM_SUBCLASS_SOLDIER);
			}
			default:
			{
				return 0;
			}
		}
	}

	private void initEntityClass() 
	{
		if(vocation < 0 || !world.isRemote) return;
		
		switch(vocation)
		{
			case CLASS_VAGABOND:
			{
				if(gender == 0) skin = RenderHumanVillager.VAGABOND_SKIN_0_F;
				else skin = RenderHumanVillager.VAGABOND_SKIN_0_M;
			}
			break;
			case CLASS_SOLDIER:
			{
				
				initEntitySubClass(subType);
			}
			break;
		}
	}

	private void initEntitySubClass(int subtype) 
	{
		switch(subtype)
		{
			case SUBCLASS_PEASANT:
			{
				skin = RenderHumanVillager.SOLDIER_SKIN_0_M;
			}
			break;
			case SUBCLASS_MILITIA:
			{
				
				skin = RenderHumanVillager.SOLDIER_SKIN_0_M;
			}
			break;
			case SUBCLASS_MAN_AT_ARMS:
			{
				skin = RenderHumanVillager.SOLDIER_SKIN_0_M;
			}
			break;
			case SUBCLASS_WARRIOR:
			{
				skin = RenderHumanVillager.SOLDIER_SKIN_0_M;
			}
			break;
			case SUBCLASS_SERGEANT:
			{
				skin = RenderHumanVillager.SOLDIER_SKIN_0_M;
			}
			break;
		}
	}

	@Override
	public void attackEntityWithRangedAttack(EntityLivingBase target, float distanceFactor) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void setSwingingArms(boolean swingingArms) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void setMaster(AbstractVillagerSoldier villager) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public boolean isShouldFollow() {
		// TODO Auto-generated method stub
		return false;
	}

	@Override
	public EntityLiving getLiving() {
		// TODO Auto-generated method stub
		return null;
	}
	
	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}

    protected void generateName(Random rand)
    {
    	this.firstName = NameGenerator.generateRandomName(rand);
    	this.lastName = NameGenerator.generateRandomName(rand);
    }
    
    protected String getTitle()
    {
    	return this.firstName+" - "+className;
    }
    
    public String getFullName()
    {
    	return this.firstName+" "+this.lastName;
    }
    
    protected String getClassName()
    {
    	return className;
    }

	public ResourceLocation getResourceLocation() {
		return this.skin;
	}

}
